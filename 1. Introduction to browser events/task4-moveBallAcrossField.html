<!-- Move the ball across the field
importance: 5
Move the ball across the field to a click. Like this:


Requirements:

The ball center should come exactly under the pointer on click (if possible without crossing the field edge).
CSS-animation is welcome.
The ball must not cross field boundaries.
When the page is scrolled, nothing should break.
Notes:

The code should also work with different ball and field sizes, not be bound to any fixed values.
Use properties event.clientX/event.clientY for click coordinates. -->

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <style>
      #field {
        width: 200px;
        height: 150px;
        border: 10px solid black;
        background-color: #00ff00;
        overflow: hidden;
        position: relative;
        cursor: pointer;
      }

      #ball {
        position: absolute;
        left: 0; /* relative to the closest positioned ancestor (field) */
        top: 0;
        transition: 1s all; /* makes the ball fly-smoothly move */
        width: 40px;
        height: 40px;
      }
    </style>
  </head>

  <body style="height: 2000px">
    Click on a field to move the ball there.
    <br />
    The ball should never leave the field.

    <div id="field">
      <img src="https://en.js.cx/clipart/ball.svg" id="ball" /> . . . . . . . .
      . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
      . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
      . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
      . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
      . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
      . . . . . . .
    </div>

    <script>
      let field = document.getElementById('field');
      let ball = document.getElementById('ball');

      field.onclick = function (e) {
        let fieldCoords = this.getBoundingClientRect();
        // console.log(fieldCoords);

        console.log('clientY:', e.clientY);
        console.log('fieldCoordsTop: ', fieldCoords.top);
        console.log('clientTop:', field.clientTop); //border height
        console.log('ball clientHeight', ball.clientHeight);

        // ballCoords = posisi bola (LEFT dan TOP) relatif terhadap field,
        // dihitung agar center bola berada tepat di titik klik pengguna.
        let ballCoords = {
          // top = posisi vertikal bola (dari atas field),
          // dihitung dari: klikY - posisi field - border field - setengah tinggi bola
          top:
            e.clientY -
            fieldCoords.top -
            field.clientTop -
            ball.clientHeight / 2,

          // left = posisi horizontal bola (dari kiri field),
          // dihitung dari: klikX - posisi field - border field - setengah lebar bola
          left:
            e.clientX -
            fieldCoords.left -
            field.clientLeft -
            ball.clientWidth / 2,
        };
        // console.log('top:', ballCoords.top);

        // console.log(field.clientWidth); //200px
        // console.log(field.clientWidth + field.clientLeft); //210px

        // if (ballCoords.top < 0) ballCoords.top = 0;
        // if (ballCoords.left < 0) ballCoords.left = 0;

        // if (ballCoords.left + ball.clientWidth > field.clientWidth) {
        //   ballCoords.left = field.clientWidth - ball.clientWidth;
        // }
        // if (ballCoords.top + ball.clientHeight > field.clientHeight) {
        //   ballCoords.top = field.clientHeight - ball.clientHeight;
        // }

        // console.log('field.clientHeight:', field.clientHeight);
        // console.log(field.clientHeight + ballCoords.top == ball.clientHeight);

        // batasi area X
        ballCoords.left = Math.max(
          0,
          Math.min(ballCoords.left, field.clientWidth - ball.clientWidth)
        );

        // batasi area Y
        ballCoords.top = Math.max(
          0,
          Math.min(ballCoords.top, field.clientHeight - ball.clientHeight)
        );

        ball.style.left = ballCoords.left + 'px';
        ball.style.top = ballCoords.top + 'px';
      };
    </script>
  </body>
</html>
